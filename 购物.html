<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
		<link rel="stylesheet" href="css/shop.css" />
		<script src="js/jquery-1.8.3.min.js"></script>
	</head>
	<body>
		<div id="box">
			<div class="nav"></div>
			<div class="container">
				<div class="containerLeft">
					<ul class="containerLeftMin">
						<li class="active"><img src="img/1-270x270-102-UXSXB7Y2.jpg" width="50"/></li>
						<li><img src="img/1-270x270-11-PTCD3DD6.jpg" width="50"/></li>
						<li><img src="img/1-270x270-12266-ACAPHW81.jpg" width="50"/></li>
					</ul>
					<div class="containerLeftMax">
						<img src="img/1-270x270-102-UXSXB7Y2.jpg" />
					</div>
				</div>
				<div class="containerRight">
					<p><h2>美国华盛顿红地厘蛇果</h2></p>
					<p>果园价:</p>
					<p>规格:</p>
					<p>配送至:<select>
						<option>北京</option>
						<option>上海</option>
						<option>天津</option>
						<option>深圳</option>
						<option>西安</option>
					</select></p>
					<p>数量:<input type="button" class="delate" value="-"/>
						<input type="text" class="txt" value="1"/>
						<input type="button" class="add" value="+"/>
					</p>
					<p><input type="button" class="buy" value="立即购买"/>
					   <input type="button" class="car" value="加入购物车"/>
					</p>
					<div class="containerRightBottom">
						<p>商品编号:</p>
						<p>产地：</p>
						<p>备注:</p>
					</div>
				</div>
			</div>	
			<div class="footer"></div>
		</div>
	</body>
</html>
<script>
	$(function(){
		$(".nav").load("nav.html");
		$(".footer").load("footer.html");
		var m=0;
		var timer;
		function autoplay(){
			timer=setInterval (function(){
				m++;
				if(m==1){
					$(".containerLeftMax img").attr({"src":"img/1-270x270-11-PTCD3DD6.jpg" });
				}
				if(m==2){
					$(".containerLeftMax img").attr({"src":"img/1-270x270-12266-ACAPHW81.jpg"});
				}
				if(m==3){
					m=0;
				}
				if(m==0){
					$(".containerLeftMax img").attr({"src":"img/1-270x270-102-UXSXB7Y2.jpg" });
				}
				for(var i=0;i<oli.length;i++){
					oli[i].className="";
				}
				oli[m].className="active";
			},1000)	
		}
		autoplay();
		//
		$(".containerLeftMin li").mouseenter(function(){
			clearInterval(timer);
		})
		$(".containerLeftMin li").mouseleave(function(){
			autoplay();
		})
		$(".containerLeftMax img").mouseenter(function(){
			clearInterval(timer);
		})
		$(".containerLeftMax img").mouseleave(function(){
			autoplay();
		})
		//
		var oli=document.getElementsByClassName("containerLeftMin")[0].getElementsByTagName("li");
		for(var i=0;i<oli.length;i++){
			oli[i].index=i;
			oli[i].onmouseover=function(){
				for(var j=0;j<oli.length;j++){
					oli[j].className="";
				}
				this.className="active";
//				console.log(this.innerHTML);
//				var imgsrc=this.innerHTML.split("src=")[1].split(" width")[0];
//				console.log(imgsrc);
//				$(".containerLeftMax img").attr({"src":imgsrc});
				m=this.index;
				if(m==1){
					$(".containerLeftMax img").attr({"src":"img/1-270x270-11-PTCD3DD6.jpg" });
				}
				if(m==2){
					$(".containerLeftMax img").attr({"src":"img/1-270x270-12266-ACAPHW81.jpg"});
				}
				if(m==3){
					m=0;
				}
				if(m==0){
					$(".containerLeftMax img").attr({"src":"img/1-270x270-102-UXSXB7Y2.jpg" });
				}
			}
		}
		//数量加减
		var num=$(".txt").val();
		$(".add").click(function(){
			num++;
//			console.log(num);
			$(".txt").val(num);
		});
		$(".delate").click(function(){
			if(num>0){
				num--;
				$(".txt").val(num);
			}
		});
		$(".txt").blur(function(){
			if($(".txt").val()<0){
				$(".txt").val(0);
			}
			var num2=$(".txt").val();
			num2=num2.replace(/\D/,"1"); // \D 所有非数字的字符
			$(".txt").val(num2);
			num=num2;
		});
		//
	})
</script>
